# Подключение тома к mysql

Подключимся к БД используя adminer, порт 8888
При подключении в качестве сервера выбираем mysql, т.к. мы моежм подключиться по имени сервиса
В качестве юзера выбираем root (в продакшене лучше завести конеретного пользователя)
а в качестве бд выбираем нашу БД time_db
и мы увидим там одну таблицу times, зайдем в нее и выберем все записи и увидим наши сохраненные 
записи

Остановим все сервисы и запустим заново
Мы увидим, что записей нет, т.е. они не сохранились

Чтобы сохранять данные надо подключить тома

> Если мы запускаем докер из под виртуальной машины (Linux), при этом основная ОС у нас Windows, то 
Используя маппинг портов можно подключить папку как из Windows (используется в процессе 
разработки) так и из  Linux (используется в продакшене)
> Тут ошибка, речь идет о маапинге внутрь докера и на Linux!!!

Мапиниг томов - это двунаправленная связь, т.е. она как записывает так и читает данные
Т.е. если мы изменили (создали) файл в Linux он тут же измениться (создасться) в контейнере и 
наоборот

> Если мы делаем маппинг томов в Docker то этот том может быть доступен любому сервису, в этом 
> примере мы делаем именно такой маппинг

Если мы удалим контейнер, то наша папка сохраниться, и при следующем запуске контейнера она 
будет считана.
Это то что нам нужно!!!

Изменим наш compose файл
Создадим том на хосте
'''
volumes:
    mysql_data:
'''
Эта инструкция создаст внутри докера папку с именем mysql_data
и подклчюим ее в контейнере, добавив эту папку, где
/var/lib/mysql - это путь внутри контейнера, где находятся все файлы БД Mysql

А если бы мы написали вот так
'''
volumes:
    ./mysql_data:
'''
то это означало бы что мы примапили папку из ОС Linux
Если маппить в ОС Linux то у меня работало и без нижней строки, т.е. просо в сервисе прописываю 
два пути: папку в ОС и папку в контенере и все
'''
volumes:
    - ./mysql_data:/var/lib/mysql
'''

Созадим три записи в БД
Остановим все сервисы и запустим заново
И теперь мы видим наши три записи.
Т.е. мы прочитали старые данные, нам удалось из созранить и прочитать с нашего хоста!!!

А теперь посмотрим где же находится наша папка, для этого выполним команду
'''docker volume ls'''
Эта команда покажет нам все тома и в самом конце мы увидим имя нашего тома с префиксом имени 
контейнера

По моему мнению способ так себе, мне кажется лучше мапить в ос, так можно скопировать ее 
сохранить, т.е. проще работать с данной папкой
